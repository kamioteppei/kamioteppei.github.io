<!DOCTYPE html>
<html lang="ja">
<head prefix:og="http://ogp.me/ns#">
  <meta charset="UTF-8">
  <title>Rails | kamioteppei.github.io</title>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <!-- Google Fonts -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700">
  <!-- Default CSS -->
  <link rel="stylesheet" href="/assets/css/style.css">
  <meta name="viewport" content="width=device-width">
  <meta name="description" content="Ruby on Rails">
  <link rel="canonical" href="http://0.0.0.0:4000/memos/rails">
  <link type="application/atom+xml" rel="alternate" href="http://0.0.0.0:4000/feed.xml" title="kamioteppei.github.io" />
  
</head>
<body>

<header class="header">
  <nav id="nav" class="nav">
    <div class="container nav__container">
      <div class="nav__brand"><a class="nav__title" href="/">kamioteppei.github.io</a></div>
      <div id="nav__btn" class="nav__btn"><i class="fa fa-bars"></i></div>
      <ul id="nav__list" class="nav__list">
        
          <li class="nav__item"><a href="/">Home</a></li>
        
        
          
            <li class="nav__item"><a href="/stack/">Stack</a></li>
          
        
          
            <li class="nav__item"><a href="/blog/">Blog</a></li>
          
        
          
            <li class="nav__item"><a href="/links/">Links</a></li>
          
        
          
        
          
        
          
        
          
        
      </ul>
    </div>
  </nav>
</header>











<div class="contents page">

  
    <div class="container">

      <!--
      <div class="page__header">
  <h1 class="page__title">Rails</h1>
  
  
    <p class="page__date">September 14, 2018</p>
  
</div>

    -->

      <div class="page__body">
        <div class="row">

          <div class="col-2 sidebar order-xs-first">
            <nav id="jqxTree" class="jqxTree">
  <!--
  https://www.siteleaf.com/blog/advanced-liquid-group-by/
  -->
  
  <ul>
    
      <li class="">
        Native
        <ul>
        
          <li class="">
            <div class=""><a href="/memos/android">Android</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/ios">iOS</a></div>
          </li>
        
        </ul>
    </li>
    
      <li class="">
        Environment
        <ul>
        
          <li class="">
            <div class=""><a href="/memos/aws">Docker</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/docker">AWS</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/gcp">GCP</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/git">Git</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/heroku">Heroku</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/mac">Mac</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/package-management">Package Manager</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/ssh">SSH</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/vagrant">Vagrant</a></div>
          </li>
        
        </ul>
    </li>
    
      <li class="">
        Engineer
        <ul>
        
          <li class="">
            <div class=""><a href="/memos/career">Career</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/freelance">Freelance</a></div>
          </li>
        
        </ul>
    </li>
    
      <li class="">
        Web
        <ul>
        
          <li class="">
            <div class=""><a href="/memos/http">HTTP</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/jekyll">Jekyll</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/markdown">Markdown</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/rails">Rails</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/security">Security</a></div>
          </li>
        
        </ul>
    </li>
    
      <li class="">
        Machine Learning
        <ul>
        
          <li class="">
            <div class=""><a href="/memos/jupyter-notebook">Jupyter Notebook</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/machine-learning">Machine Learning</a></div>
          </li>
        
        </ul>
    </li>
    
  </ul>
</nav>

          </div>

          <div class="col-8 main toc-src order-first">
            <h1 id="ruby-on-rails">Ruby on Rails</h1>

<p>このアプリケーションを動かす場合は、まずはリポジトリを手元にクローンしてください。 その後、次のコマンドで必要になる Ruby Gems をインストールします。
$ bundle install –without production</p>

<p>その後、データベースへのマイグレーションを実行します。
$ rails db:migrate</p>

<p>最後に、テストを実行してうまく動いているかどうか確認してください。
$ rails test</p>

<p>テストでエラーになった場合、
テスト環境向けのマイグレーションが
できていないので、やり直す</p>

<p>$ rails db:migrate:reset
$ rails db:migrate RAILS_ENV=test
$ rails test</p>

<p>テストが無事に通ったら、Railsサーバーを立ち上げる準備が整っているはずです。
$ rails server</p>

<p>Vagrantを使用している環境で、アクセスできない場合は こちらです。
$ rails server -b 0.0.0.0</p>

<p>http://192.168.33.10:3000/　にアクセスします。</p>

<p>Railsサーバーをターミナルで、
操作する場合は、
$ rails console</p>

<p>railsコンソールを終了するには
$ ctrl+d
または
$ exit</p>

<p>RailsサーバーのDBをターミナルで、
操作する場合は、
$ rails db</p>

<p>db接続を終了するには
$ ctrl+d</p>

<p>デバッグ</p>

<p>デバッグする場合は、
ブレイクポイントに下記の１行を追加
debugger</p>

<p>そうするとブレイクポイントを
通った時に、コンソールが
デバッグモードになっているので
変数の中身をコマンドで確認する。</p>

<p>変数の確認が終わったら、
ブレイクポイントの記述を
コメントアウトしないと
ずっとデバッグモードになっていると
思われるので、コメントアウトする
#debugger</p>

<p>gemの変更</p>

<p>Gemfileを修正する
$ bundle install</p>

<p>スキーマ変更</p>

<p>schema.rbはマイグレーションの結果であって、
このファイルを直接修正しても意味はない</p>

<p>マイグレーションファイルを作成する
$ rails generate migration add_column_to_microposts</p>

<p>マイグレーションファイルを修正する
def change
   add_column :microposts, :ancestry, :string, index: true
end</p>

<p>マイグレーションを実行する
$ rails db:migrate</p>

<p>schema.rbの内容を確認する</p>

<p>コントローラーを変更する
$ rails generate controller NAME [action action] [options]
$ rails generate controller AdminUsers index show
既に存在するファイルは対話モードで、上書きするか聞かれるので
スキップ等を選ぶ
ルート、ビュー、コントローラー、テスト等のファイルが作成される</p>

<p>モデルを変更する
$ rails generate model NAME [field[:type][:index] field[:type][:index]] [options]
$ rails generate model AdminUser name:string mail:string</p>


          </div>

          <div class="col-2 sidebar order-xs-first">
            <nav class="toc"></nav>

          </div>

        </div><!--row-->
      </div><!--page-body-->

    </div><!--container-->

  

</div><!--page-->



<footer class="footer">
  
  <div class="container container--sm footer__container">
  
    <p class="copyright"><small>&copy; 2018 kamioteppei</small></p>

    <div class="social-link">
      
        <p class="social-link__item">
          <a href="https://github.com/kamioteppei"><i class="fa fa-github"></i></a>
        </p>
      
      
    </div>
  </div><!--container-->
</footer>

<script src="/assets/js/jfgp.js"></script>
</body>
</html>
