<!DOCTYPE html>
<html lang="ja">
<head prefix:og="http://ogp.me/ns#">
  <meta charset="UTF-8">
  <title>Git | kamioteppei.github.io</title>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <!-- Google Fonts -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700">
  <!-- Default CSS -->
  <link rel="stylesheet" href="/assets/css/style.css">
  <meta name="viewport" content="width=device-width">
  <meta name="description" content="Git">
  <link rel="canonical" href="http://0.0.0.0:4000/memos/git">
  <link type="application/atom+xml" rel="alternate" href="http://0.0.0.0:4000/feed.xml" title="kamioteppei.github.io" />
  
  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
  </script>
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      displayAlign: "left",
      displayIndent: "2em"
    });
  </script>
  <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
  <script language="JavaScript">
    $(document).ready( function () {
       $("a[href^='http']:not([href*='" + location.hostname + "'])").attr('target', '_blank');
    })
  </script>
</head>
<body>

<header class="header">
  <nav id="nav" class="nav">
    <div class="container nav__container">
      <div class="nav__brand"><a class="nav__title" href="/">kamioteppei.github.io</a></div>
      <div id="nav__btn" class="nav__btn"><i class="fa fa-bars"></i></div>
      <ul id="nav__list" class="nav__list">
        
          <li class="nav__item"><a href="/">Home</a></li>
        
        
          
            <li class="nav__item"><a href="/stack/">Stack</a></li>
          
        
          
            <li class="nav__item"><a href="/blog/">Blog</a></li>
          
        
          
            <li class="nav__item"><a href="/links/">Links</a></li>
          
        
          
        
          
        
          
        
          
        
      </ul>
    </div>
  </nav>
</header>











<div class="contents page">

  
    <div class="container">

      <!--
      <div class="page__header">
  <h1 class="page__title">Git</h1>
  
  
    <p class="page__date">February 08, 2019</p>
  
</div>

    -->

      <div class="page__body">
        <div class="row">

          <div class="col-2 sidebar order-xs-first">
            <nav id="jqxTree" class="jqxTree">
  <!--
  https://www.siteleaf.com/blog/advanced-liquid-group-by/
  -->
  
  <ul>
    
      <li class="">
        Native
        <ul>
        
          <li class="">
            <div class=""><a href="/memos/android">Android</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/ios">iOS</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/react-native">React Native</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/vr">VR/AR</a></div>
          </li>
        
        </ul>
    </li>
    
      <li class="">
        Frontend
        <ul>
        
          <li class="">
            <div class=""><a href="/memos/angularjs">AngularJS</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/react">React</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/vue">Vue</a></div>
          </li>
        
        </ul>
    </li>
    
      <li class="">
        Environment
        <ul>
        
          <li class="">
            <div class=""><a href="/memos/aws">AWS</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/ci">CI/CD</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/docker">Docker</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/elasticsearch">Elasticsearch</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/gcp">GCP</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/git">Git</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/heroku">Heroku</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/mac">Mac</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/package-management">Package Manager</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/ssh">SSH</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/ubuntu">Ubuntu</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/vagrant">Vagrant</a></div>
          </li>
        
        </ul>
    </li>
    
      <li class="">
        UI/UX
        <ul>
        
          <li class="">
            <div class=""><a href="/memos/bootstrap">Bootstrap</a></div>
          </li>
        
        </ul>
    </li>
    
      <li class="">
        Engineer
        <ul>
        
          <li class="">
            <div class=""><a href="/memos/career">Career</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/freelance">Freelance</a></div>
          </li>
        
        </ul>
    </li>
    
      <li class="">
        Machine Learning
        <ul>
        
          <li class="">
            <div class=""><a href="/memos/competition">Competition</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/data">Data</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/jupyter-notebook">Jupyter Notebook</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/machine-learning">Machine Learning</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/math">Math</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/nlp">Natural language processing</a></div>
          </li>
        
        </ul>
    </li>
    
      <li class="">
        Web
        <ul>
        
          <li class="">
            <div class=""><a href="/memos/http">HTTP</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/jekyll">Jekyll</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/markdown">Markdown</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/rails">Rails</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/security">Security</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/spring">Spring</a></div>
          </li>
        
        </ul>
    </li>
    
      <li class="">
        DataBase
        <ul>
        
          <li class="">
            <div class=""><a href="/memos/mysql">PostgreSQL</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/oracle">Oracle</a></div>
          </li>
        
          <li class="">
            <div class=""><a href="/memos/postgresql">MySQL</a></div>
          </li>
        
        </ul>
    </li>
    
  </ul>
</nav>

          </div>

          <div class="col-8 main toc-src order-first">
            <h1 id="git">Git</h1>

<h2 id="init">init</h2>
<p>ローカルリポジトリを作成する。</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git init
echo "# *.csv" &gt;&gt; .gitignore
echo "# MESSAGE" &gt;&gt; README.md
git add README.md
git commit -m "first commit"
</code></pre></div></div>
<h2 id="リモートリポジトリに追加する">リモートリポジトリに追加する</h2>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git remote add origin git@github.com:&lt;your-account&gt;/&lt;repository-name&gt;.git
git push -u origin master
</code></pre></div></div>

<h2 id="clone">clone</h2>
<p>リモートリポジトリをローカルディレクトリにコピーする。<br />
ローカルリポジトリが作成される。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cd &lt;クローンを作成するディレクトリ&gt;
</code></pre></div></div>
<p>直下にクローンするプロジェクトのプロジェクト名のフォルダが作成される。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git clone &lt;url&gt;
</code></pre></div></div>
<p>urlはgithubでクローンしたいプロジェクトを開いて、<br />
クローンボタンを押すとurlが表示される(git@アカウント/プロジェクト名.git)</p>

<p>リモートリポジトリからローカルにダウンロードする。<br />
リモートリポジトリには以下がある。</p>
<ul>
  <li>自分のアカウント</li>
  <li>自分のプロジェクトのアカウント</li>
  <li>それ以外のアカウント</li>
</ul>

<p>それ以外のアカウントのプロジェクトをクローンしても、
そこにpushしてはいけない（権限でできない？）ので、　
自分のアカウントにfolkする。
その後は、ローカルにclone、修正、add、commit、push、
必要があれば、purllrequestを行う。</p>

<h2 id="add">add</h2>
<p>ローカルで新規に作成下ファイルを、gitに認識させる。</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git add .
</code></pre></div></div>
<p>なぜか*.rb等ではアドされなかった。</p>

<h2 id="commit">commit</h2>
<p>ローカルリポジトリにコミットする。</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git commit -m "commit messege."
</code></pre></div></div>

<p>Vagrant環境だと、ユーザー名とメールアドレスが
Vagrantになるので、設定を変更する</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git config --global user.name "hoge fuga"
$ git config --global user.email foo@bar.com
</code></pre></div></div>

<h2 id="push">push</h2>
<p>ローカルリポジトリの変更をリモートリポジトリに、反映する。</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git push
</code></pre></div></div>
<p>または、アカウントとブランチを指定する。</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git push origin master
</code></pre></div></div>

<h2 id="ブランチ">ブランチ</h2>
<p>開発時には、マスター(タグ)からブランチ(タグ)を作成し、<br />
他のブランチとのリリースも考慮し、<br />
マスターにマージしてよければ、マージする。<br />
マージの方法には、ローカルでマージする方法と<br />
リモートにブランチをpushして、<br />
pull requestを送る方法がある。<br />
pull requestはgithubでマージする。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cd &lt;クローンしたプロジェクトの中に移動&gt;
$ git checkout -b &lt;branch-name&gt;
</code></pre></div></div>
<p>以下は同義である</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git branch &lt;branch-name&gt;
$ git checkout &lt;branch-name&gt;
</code></pre></div></div>

<p>現在チェックアウトしているタグを<br />
確認する場合は以下のコマンドをたたく。</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git branch
</code></pre></div></div>
<p>どのタグがチェックアウト中かわかる。</p>

<p>リモートにあるタグを確認する場合は、<br />
以下のコマンドをたたく。</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git branch -r
</code></pre></div></div>
<p>どのタグがヘッダかわかる。
ローカルで作成したブランチタグは、
リモートにpushしないと、
リモートには存在しない。</p>

<h3 id="マージ方法１">マージ方法１</h3>
<p>(オープンソースプロジェクトの開発向け)<br />
開発したいプロジェクトのアカウントから
対象のプロジェクトのfolkボタンで、
自分のgithubのアカウントにフォーク
ローカルにクローン<br />
ブランチを作成</p>

<p>ローカルでブランチタグを<br />
マスタータグにマージして、<br />
プッシュする場合<br />
ブランチタグをアドとコミットしてから</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git checkout master
$ git merge &lt;branchname&gt;
$ git push origin master
</code></pre></div></div>

<p>マスタータグにマージしたブランチタグは
不要なので削除する</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git branch -d &lt;branchname&gt;
</code></pre></div></div>

<h3 id="マージ方法２">マージ方法２</h3>
<p>(社内プロジェクトチームの開発向け)
リモートにブランチタグを
プッシュして、purll requestを送信する場合は、
ブランチタグをアドとコミットしてから</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git push origin &lt;branchname&gt;
</code></pre></div></div>
<p>githubの画面で上記のブランチに切り替える
プルリクエストを送信する
宛て先を確認すること
プルリクエストのマージボタンをクリック
確認ボタンをクリック
マージしたブランチの削除ボタンをクリック</p>

<p>ブランチタグは
不要なので削除する</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git checkout master
$ git branch -D &lt;branchname&gt;
</code></pre></div></div>
<p>マージ方法１のように、ローカルでは
マージしていないので、オプションが-dだと
ブランチを削除できない。
よって-Dとする</p>

<p>この時点でローカルのマスタータグは
リモートのマスタータグにマージした
内容が反映されていないので、
リモートのマスタータグと同機をとる</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git pull origin master
</code></pre></div></div>

<h2 id="ファイル削除">ファイル削除</h2>
<p>ファイルを削除する場合、SVNと同じで、 <br />
シェルの削除コマンドでしてはいけない。　　
Gitコマンドを使用する</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git rm foo/var/hoge.rb
</code></pre></div></div>

<p>ディレクトリを丸ごと削除する場合</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git rm -r foo/var
</code></pre></div></div>

<h2 id="リモートの状態をローカルに置換">リモートの状態をローカルに置換</h2>

<p>ローカルの削除方法を間違えた時に、<code class="highlighter-rouge">git pull</code>しても、<br />
正しくリモートの状態に変わらない</p>

<p>以下でリモートを強制的に、ローカルに置換する</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git reset --hard
</code></pre></div></div>


          </div>

          <div class="col-2 sidebar order-xs-first">
            <nav class="toc"></nav>

          </div>

        </div><!--row-->
      </div><!--page-body-->

    </div><!--container-->

  

</div><!--page-->



<footer class="footer">
  
  <div class="container container--sm footer__container">
  
    <p class="copyright"><small>&copy; 2018 kamioteppei</small></p>

    <div class="social-link">
      
        <p class="social-link__item">
          <a href="https://github.com/kamioteppei"><i class="fa fa-github"></i></a>
        </p>
      
      
    </div>
  </div><!--container-->
</footer>

<script src="/assets/js/jfgp.js"></script>
</body>
</html>
